<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dice Level Select Scratch Challenge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
  <style>
    :root {
      --primary: #ff4d6d;
      --primary-dark: #d90429;
      --secondary: #7209b7;
      --light: #f8f9fa;
      --dark: #212529;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --shadow-hover: 0 15px 35px rgba(0, 0, 0, 0.15);
      --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
      color: var(--dark);
      min-height: 100vh;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      perspective: 1000px;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Language Selector */
    .language-selector {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
      z-index: 1000;
    }

    .lang-btn {
      width: 40px;
      height: 30px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: var(--transition);
    }

    .lang-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.3);
    }

    .lang-btn.active {
      box-shadow: 0 0 0 2px var(--primary);
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
      animation: fadeIn 0.8s ease-out;
    }

    h1 {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--gray);
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* Level Selection Screen */
    .level-selection {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 2rem 0;
      text-align: center;
    }

    .level-prompt {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: var(--primary-dark);
      font-weight: 600;
    }

    .dice-container {
      position: relative;
      width: 150px;
      height: 150px;
      margin: 2rem 0;
      transform-style: preserve-3d;
      cursor: pointer;
      transition: transform 0.5s ease;
    }

    .dice {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
      transition: transform 1s ease-out;
    }

    .dice-face {
      position: absolute;
      width: 100%;
      height: 100%;
      background: white;
      border: 3px solid var(--primary);
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 1rem;
      font-weight: bold;
      color: var(--primary-dark);
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1),
                  0 10px 25px rgba(0, 0, 0, 0.15);
      text-align: center;
      padding: 10px;
      line-height: 1.3;
    }

    .dice-face::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.2) 100%);
      border-radius: 12px;
    }

    .dice-number {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 5px;
      color: var(--primary);
    }

    .dice-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .dice-face:nth-child(1) { transform: rotateY(0deg) translateZ(75px); }
    .dice-face:nth-child(2) { transform: rotateY(90deg) translateZ(75px); }
    .dice-face:nth-child(3) { transform: rotateX(90deg) translateZ(75px); }
    .dice-face:nth-child(4) { transform: rotateX(-90deg) translateZ(75px); }
    .dice-face:nth-child(5) { transform: rotateY(-90deg) translateZ(75px); }
    .dice-face:nth-child(6) { transform: rotateY(180deg) translateZ(75px); }

    .level-info {
      margin-top: 2rem;
      font-size: 1.1rem;
      color: var(--gray);
      max-width: 500px;
    }

    /* Game Screen (initially hidden) */
    .game-screen {
      display: none;
      width: 100%;
      flex-direction: column;
      align-items: center;
    }

    .selected-level {
      font-size: 1.5rem;
      color: var(--primary-dark);
      margin-bottom: 1.5rem;
      font-weight: 600;
    }

    .instructions {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      padding: 1.5rem;
      border-radius: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .instructions svg {
      flex-shrink: 0;
      color: var(--primary);
    }

    .instructions p {
      font-size: 1rem;
      color: var(--gray);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 2rem;
      width: 100%;
      justify-items: center;
    }

    .scratch-circle {
      position: relative;
      width: 160px;
      height: 160px;
      transform-style: preserve-3d;
      transition: var(--transition);
      cursor: pointer;
    }

    .circle-container {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: var(--transition);
      border-radius: 50%;
    }

    .circle-content {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
      backface-visibility: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .circle-content img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }

    .scratch-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: linear-gradient(145deg, #6c757d 0%, #495057 100%);
      box-shadow: inset 0 10px 30px rgba(0, 0, 0, 0.2),
                  0 10px 30px rgba(0, 0, 0, 0.15);
      transform: translateZ(10px);
      touch-action: none;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      transform: translateZ(15px);
    }

    .circle-border {
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.3);
      transform: translateZ(5px);
      pointer-events: none;
    }

    .scratch-circle:hover .circle-container {
      transform: rotateY(10deg) rotateX(10deg) scale(1.05);
    }

    .scratch-circle:hover .circle-content img {
      transform: scale(1.1);
    }

    /* Zoom Overlay */
    .zoom-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .zoom-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .zoomed-image-container {
      position: relative;
      max-width: 90%;
      max-height: 90%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .zoomed-image {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
      border-radius: 8px;
      transform: scale(0.5);
      opacity: 0;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .zoom-overlay.active .zoomed-image {
      transform: scale(1);
      opacity: 1;
    }

    .close-zoom {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.2);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
      z-index: 2001;
    }

    .close-zoom:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(90deg);
    }

    /* Celebration Overlay */
    .celebration-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.85);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.5s ease;
    }

    .celebration-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .celebration-content {
      text-align: center;
      transform: scale(0.5) rotateX(90deg);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .celebration-overlay.active .celebration-content {
      transform: scale(1) rotateX(0deg);
      opacity: 1;
    }

    .celebration-title {
      font-size: 3rem;
      color: white;
      margin-bottom: 1rem;
      text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .celebration-message {
      font-size: 1.5rem;
      color: #f8f9fa;
      margin-bottom: 2rem;
      max-width: 600px;
      line-height: 1.5;
    }

    .celebration-emoji {
      font-size: 5rem;
      margin-bottom: 2rem;
      animation: float 3s ease-in-out infinite;
    }

    .celebration-button {
      padding: 1rem 2rem;
      border: none;
      border-radius: 50px;
      background: linear-gradient(145deg, var(--primary), var(--primary-dark));
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow);
      font-size: 1.2rem;
    }

    .celebration-button:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-hover);
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #f00;
      opacity: 0;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes confetti-fall {
      0% { 
        transform: translateY(-100vh) rotate(0deg); 
        opacity: 1;
      }
      100% { 
        transform: translateY(100vh) rotate(360deg); 
        opacity: 0;
      }
    }

    .back-btn {
      margin-top: 2rem;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 50px;
      background: linear-gradient(145deg, var(--primary), var(--primary-dark));
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .back-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-hover);
    }

    footer {
      margin-top: 3rem;
      text-align: center;
      color: var(--gray);
      font-size: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .creator {
      margin-top: 1rem;
      font-style: italic;
      color: var(--primary-dark);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes diceRoll {
      0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
      100% { transform: rotateX(720deg) rotateY(360deg) rotateZ(180deg); }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    /* Responsive adjustments */
    @media (max-width: 992px) {
      .grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 1.5rem;
      }
      
      .scratch-circle {
        width: 140px;
        height: 140px;
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 2.2rem;
      }
      
      .subtitle {
        font-size: 1rem;
      }
      
      .dice-container {
        width: 120px;
        height: 120px;
      }
      
      .dice-face {
        font-size: 0.8rem;
        border-radius: 12px;
      }
      
      .dice-number {
        font-size: 2rem;
      }
      
      .dice-face:nth-child(1) { transform: rotateY(0deg) translateZ(60px); }
      .dice-face:nth-child(2) { transform: rotateY(90deg) translateZ(60px); }
      .dice-face:nth-child(3) { transform: rotateX(90deg) translateZ(60px); }
      .dice-face:nth-child(4) { transform: rotateX(-90deg) translateZ(60px); }
      .dice-face:nth-child(5) { transform: rotateY(-90deg) translateZ(60px); }
      .dice-face:nth-child(6) { transform: rotateY(180deg) translateZ(60px); }
      
      .grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 1.2rem;
      }
      
      .scratch-circle {
        width: 120px;
        height: 120px;
      }
      
      .instructions {
        flex-direction: column;
        text-align: center;
      }

      .celebration-title {
        font-size: 2rem;
      }

      .celebration-message {
        font-size: 1.2rem;
        padding: 0 1rem;
      }

      .celebration-emoji {
        font-size: 3rem;
      }

      .language-selector {
        top: 10px;
        right: 10px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 1rem;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .dice-container {
        width: 100px;
        height: 100px;
      }
      
      .dice-face {
        font-size: 0.7rem;
        border-radius: 10px;
      }
      
      .dice-number {
        font-size: 1.5rem;
      }
      
      .dice-face:nth-child(1) { transform: rotateY(0deg) translateZ(50px); }
      .dice-face:nth-child(2) { transform: rotateY(90deg) translateZ(50px); }
      .dice-face:nth-child(3) { transform: rotateX(90deg) translateZ(50px); }
      .dice-face:nth-child(4) { transform: rotateX(-90deg) translateZ(50px); }
      .dice-face:nth-child(5) { transform: rotateY(-90deg) translateZ(50px); }
      .dice-face:nth-child(6) { transform: rotateY(180deg) translateZ(50px); }
      
      .grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 1rem;
      }
      
      .scratch-circle {
        width: 100px;
        height: 100px;
      }

      .celebration-title {
        font-size: 1.8rem;
      }

      .celebration-message {
        font-size: 1rem;
      }

      .celebration-emoji {
        font-size: 2.5rem;
      }

      .language-selector {
        position: static;
        margin-bottom: 1rem;
        justify-content: center;
      }
    }

    /* RTL support for Arabic */
    body[dir="rtl"] {
      direction: rtl;
    }

    body[dir="rtl"] .language-selector {
      right: auto;
      left: 20px;
    }

    @media (max-width: 768px) {
      body[dir="rtl"] .language-selector {
        right: auto;
        left: 10px;
      }
    }

    @media (max-width: 480px) {
      body[dir="rtl"] .language-selector {
        right: auto;
        left: auto;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Language Selector -->
    <div class="language-selector">
      <button class="lang-btn active" data-lang="en">
        <span class="flag-icon flag-icon-gb"></span>
      </button>
      <button class="lang-btn" data-lang="fr">
        <span class="flag-icon flag-icon-fr"></span>
      </button>
      <button class="lang-btn" data-lang="ar">
        <span class="flag-icon flag-icon-sa"></span>
      </button>
    </div>

    <header>
      <h1 id="title">Dice Level Select Challenge</h1>
      <p class="subtitle" id="subtitle">Roll the dice to select your level, then scratch to reveal</p>
    </header>

    <!-- Level Selection Screen -->
    <div class="level-selection" id="levelSelection">
      <div class="level-prompt" id="levelPrompt">Roll the dice to select your level</div>
      <div class="dice-container">
        <div class="dice" id="dice">
          <div class="dice-face">
            <div class="dice-number">1</div>
            <div class="dice-label" id="level1Label">Basic</div>
          </div>
          <div class="dice-face">
            <div class="dice-number">2</div>
            <div class="dice-label" id="level2Label">Easy</div>
          </div>
          <div class="dice-face">
            <div class="dice-number">3</div>
            <div class="dice-label" id="level3Label">Medium</div>
          </div>
          <div class="dice-face">
            <div class="dice-number">4</div>
            <div class="dice-label" id="level4Label">Hard</div>
          </div>
          <div class="dice-face">
            <div class="dice-number">5</div>
            <div class="dice-label" id="level5Label">Expert</div>
          </div>
          <div class="dice-face">
            <div class="dice-number">6</div>
            <div class="dice-label" id="level6Label">Master</div>
          </div>
        </div>
      </div>
      <div class="level-info" id="levelInfo">
        Each number on the dice corresponds to a different level with unique images to discover!
      </div>
    </div>

    <!-- Game Screen (initially hidden) -->
    <div class="game-screen" id="gameScreen">
      <div class="selected-level" id="selectedLevel">Level 1</div>
      <div class="instructions">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        <p id="instructionsText">Scratch the circles to reveal the hidden images</p>
      </div>
      <div class="grid" id="grid"></div>
      <button class="back-btn" id="backBtn">Back to Level Select</button>
    </div>

    <!-- Zoom Overlay -->
    <div class="zoom-overlay" id="zoomOverlay">
      <div class="zoomed-image-container">
        <img class="zoomed-image" id="zoomedImage" src="" alt="Zoomed image">
      </div>
      <div class="close-zoom" id="closeZoom">&times;</div>
    </div>

    <!-- Celebration Overlay -->
    <div class="celebration-overlay" id="celebrationOverlay">
      <div class="celebration-content">
        <div class="celebration-emoji" id="celebrationEmoji">🎉</div>
        <h2 class="celebration-title" id="celebrationTitle">Level Complete!</h2>
        <p class="celebration-message" id="celebrationMessage">You've revealed all the images in this level!</p>
        <button class="celebration-button" id="celebrationButton">Continue</button>
      </div>
    </div>

    <footer>
      <p id="footerText">Enjoy this interactive dice and scratch challenge!</p>
      <div class="creator">Created by Imane el kanz</div>
    </footer>
  </div>

  <script>
    // Language translations
    const translations = {
      en: {
        title: "Dice Level Select Challenge",
        subtitle: "Roll the dice to select your level, then scratch to reveal",
        levelPrompt: "Roll the dice to select your level",
        levelInfo: "Each number on the dice corresponds to a different level with unique images to discover!",
        instructions: "Scratch the circles to reveal the hidden images",
        selectedLevel: "Level",
        backBtn: "Back to Level Select",
        footer: "Enjoy this interactive dice and scratch challenge!",
        creator: "Created by Imane el kanz",
        levelLabels: ["Basic", "Easy", "Medium", "Hard", "Expert", "Master"],
        rollMessage: "Rolling the dice...",
        celebrationTitle: "Level Complete!",
        celebrationMessages: [
          "You've unlocked the Beach level! Time to relax in the sun!",
          "Gift level completed! You're full of surprises!",
          "Cafe level finished! Enjoy your coffee break!",
          "Travel level unlocked! The world is yours to explore!",
          "Zoo level complete! You're an animal lover!",
          "Amusement Parks level done! Fun times ahead!",
          "Bowling level finished! Strike!",
          "Barbecue level complete! Time to grill!",
          "Restaurant level unlocked! Bon appétit!",
          "Cinema level finished! Enjoy the show!"
        ],
        celebrationEmojis: ["🏖️", "🎁", "☕", "✈️", "🦁", "🎢", "🎳", "🍖", "🍽️", "🎬"],
        celebrationButton: "Continue"
      },
      fr: {
        title: "Défi de Sélection de Niveau par Dé",
        subtitle: "Lancez le dé pour sélectionner votre niveau, puis grattez pour révéler",
        levelPrompt: "Lancez le dé pour sélectionner votre niveau",
        levelInfo: "Chaque numéro sur le dé correspond à un niveau différent avec des images uniques à découvrir!",
        instructions: "Grattez les cercles pour révéler les images cachées",
        selectedLevel: "Niveau",
        backBtn: "Retour à la sélection de niveau",
        footer: "Profitez de ce défi interactif de dé et de grattage!",
        creator: "Créé par Imane el kanz",
        levelLabels: ["Basique", "Facile", "Moyen", "Difficile", "Expert", "Maître"],
        rollMessage: "Lancer le dé...",
        celebrationTitle: "Niveau Terminé!",
        celebrationMessages: [
          "Vous avez débloqué le niveau Plage! Temps de se détendre au soleil!",
          "Niveau Cadeau terminé! Vous êtes plein de surprises!",
          "Niveau Café terminé! Profitez de votre pause café!",
          "Niveau Voyage débloqué! Le monde est à vous!",
          "Niveau Zoo terminé! Vous aimez les animaux!",
          "Niveau Parcs d'attractions terminé! Moments amusants à venir!",
          "Niveau Bowling terminé! Strike!",
          "Niveau Barbecue terminé! Temps de griller!",
          "Niveau Restaurant débloqué! Bon appétit!",
          "Niveau Cinéma terminé! Profitez du spectacle!"
        ],
        celebrationEmojis: ["🏖️", "🎁", "☕", "✈️", "🦁", "🎢", "🎳", "🍖", "🍽️", "🎬"],
        celebrationButton: "Continuer"
      },
      ar: {
        title: "تحدي اختيار المستوى بالنرد",
        subtitle: "قم برمي النرد لتحديد مستواك، ثم اكشط للكشف",
        levelPrompt: "قم برمي النرد لتحديد مستواك",
        levelInfo: "كل رقم على النرد يتوافق مع مستوى مختلف يحتوي على صور فريدة لاكتشافها!",
        instructions: "اكشط الدوائر للكشف عن الصور المخفية",
        selectedLevel: "المستوى",
        backBtn: "العودة إلى اختيار المستوى",
        footer: "استمتع بتحدي النرد والكشط التفاعلي هذا!",
        creator: "من صنع إيمان الكنز",
        levelLabels: ["مبتدئ", "سهل", "متوسط", "صعب", "خبير", "متمكن"],
        rollMessage: "يتم رمي النرد...",
        celebrationTitle: "اكتمل المستوى!",
        celebrationMessages: [
          "لقد فتحت مستوى الشاطئ! حان وقت الاسترخاء تحت الشمس!",
          "اكتمل مستوى الهدايا! أنت مليء بالمفاجآت!",
          "اكتمل مستوى المقهى! استمتع بفترة استراحة القهوة!",
          "تم فتح مستوى السفر! العالم ملكك لاستكشافه!",
          "اكتمل مستوى حديقة الحيوان! أنت من محبي الحيوانات!",
          "اكتمل مستوى الملاهي! أوقات ممتعة في الانتظار!",
          "اكتمل مستوى البولينج! ضربة!",
          "اكتمل مستوى الشواء! حان وقت الشواء!",
          "تم فتح مستوى المطعم! بالهنا والشفا!",
          "اكتمل مستوى السينما! استمتع بالعرض!"
        ],
        celebrationEmojis: ["🏖️", "🎁", "☕", "✈️", "🦁", "🎢", "🎳", "🍖", "🍽️", "🎬"],
        celebrationButton: "استمر"
      }
    };

    // Level themes
    const levelThemes = [
      "Beach", "Gift", "Cafe", "Travel", "Zoo", 
      "Amusement Parks", "Bowling", "Barbecue", "Restaurant", "Cinema"
    ];

    // Image sets for each level
    const imageSets = {
      1: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/1.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/2.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/3.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/4.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/5.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/6.jpg",

        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/67.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/68.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/69.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/70.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/71.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/72.gif"
      ],
      2: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/7.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/8.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/9.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/10.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/11.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/12.jpg",

        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/73.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/74.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/75.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/76.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/77.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/78.gif"
      ],
      3: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/13.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/14.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/15.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/16.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/17.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/18.jpg"
      ],
      4: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/19.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/20.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/21.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/22.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/23.jpg",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/24.jpg"
      ],
      5: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/25.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/26.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/27.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/28.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/29.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/30.gif"
      ],
      6: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/31.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/32.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/33.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/34.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/35.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/36.gif"
      ],
      7: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/37.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/38.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/39.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/40.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/41.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/42.gif"
      ],
      8: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/43.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/44.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/45.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/46.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/47.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/48.gif"
      ],
      9: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/50.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/51.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/52.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/53.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/54.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/49.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/61.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/62.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/63.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/64.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/65.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/66.gif"
      ],
      10: [
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/57.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/58.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/59.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/60.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/55.gif",
        "https://raw.githubusercontent.com/nabiledd007/NbPs/main/56.gif"
      ]
    };

    // DOM elements
    const levelSelection = document.getElementById('levelSelection');
    const gameScreen = document.getElementById('gameScreen');
    const dice = document.getElementById('dice');
    const grid = document.getElementById('grid');
    const selectedLevel = document.getElementById('selectedLevel');
    const backBtn = document.getElementById('backBtn');
    const langButtons = document.querySelectorAll('.lang-btn');
    const creatorElement = document.querySelector('.creator');
    const levelPrompt = document.getElementById('levelPrompt');
    const levelLabels = [
      document.getElementById('level1Label'),
      document.getElementById('level2Label'),
      document.getElementById('level3Label'),
      document.getElementById('level4Label'),
      document.getElementById('level5Label'),
      document.getElementById('level6Label')
    ];
    
    // Zoom elements
    const zoomOverlay = document.getElementById('zoomOverlay');
    const zoomedImage = document.getElementById('zoomedImage');
    const closeZoom = document.getElementById('closeZoom');
    
    // Celebration elements
    const celebrationOverlay = document.getElementById('celebrationOverlay');
    const celebrationTitle = document.getElementById('celebrationTitle');
    const celebrationMessage = document.getElementById('celebrationMessage');
    const celebrationEmoji = document.getElementById('celebrationEmoji');
    const celebrationButton = document.getElementById('celebrationButton');
    
    let currentLevel = 1;
    let currentLanguage = 'en';
    let scratchCircles = [];
    let revealedCount = 0;

    // Initialize with English
    setLanguage('en');

    // Language button events
    langButtons.forEach(button => {
      button.addEventListener('click', () => {
        const lang = button.dataset.lang;
        if (lang !== currentLanguage) {
          langButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          currentLanguage = lang;
          setLanguage(lang);
        }
      });
    });

    // Dice click event
    dice.addEventListener('click', rollDice);

    // Back button event
    backBtn.addEventListener('click', () => {
      gameScreen.style.display = 'none';
      levelSelection.style.display = 'flex';
    });

    // Close zoom overlay
    closeZoom.addEventListener('click', () => {
      zoomOverlay.classList.remove('active');
    });

    // Close overlay when clicking outside the image
    zoomOverlay.addEventListener('click', (e) => {
      if (e.target === zoomOverlay) {
        zoomOverlay.classList.remove('active');
      }
    });

    // Celebration button event
    celebrationButton.addEventListener('click', () => {
      celebrationOverlay.classList.remove('active');
      gameScreen.style.display = 'none';
      levelSelection.style.display = 'flex';
    });

    function setLanguage(lang) {
      // Set document direction for RTL languages
      document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
      
      // Update all text elements
      document.getElementById('title').textContent = translations[lang].title;
      document.getElementById('subtitle').textContent = translations[lang].subtitle;
      document.getElementById('levelPrompt').textContent = translations[lang].levelPrompt;
      document.getElementById('levelInfo').textContent = translations[lang].levelInfo;
      document.getElementById('instructionsText').textContent = translations[lang].instructions;
      document.getElementById('backBtn').textContent = translations[lang].backBtn;
      document.getElementById('footerText').textContent = translations[lang].footer;
      creatorElement.textContent = translations[lang].creator;
      celebrationTitle.textContent = translations[lang].celebrationTitle;
      celebrationButton.textContent = translations[lang].celebrationButton;
      
      // Update level labels on dice
      levelLabels.forEach((label, index) => {
        label.textContent = translations[lang].levelLabels[index];
      });
      
      // Update selected level text if game screen is visible
      if (gameScreen.style.display === 'flex') {
        selectedLevel.textContent = `${translations[lang].selectedLevel} ${currentLevel}`;
      }
    }

    function rollDice() {
      // Disable clicking during animation
      dice.style.pointerEvents = 'none';
      
      // Show rolling message
      const originalPrompt = levelPrompt.textContent;
      levelPrompt.textContent = translations[currentLanguage].rollMessage;
      
      // Random final rotation (1-10)
      const finalRoll = Math.floor(Math.random() * 10) + 1;
      
      // Calculate rotation based on dice face
      let rotateX, rotateY;
      switch(finalRoll) {
        case 1: rotateX = 0; rotateY = 0; break;
        case 2: rotateX = 0; rotateY = 90; break;
        case 3: rotateX = 90; rotateY = 0; break;
        case 4: rotateX = -90; rotateY = 0; break;
        case 5: rotateX = 0; rotateY = -90; break;
        case 6: rotateX = 0; rotateY = 180; break;
        default: 
          // For levels 7-10, use random rotations since dice only has 6 faces
          rotateX = Math.random() > 0.5 ? 180 : 0;
          rotateY = Math.random() * 360;
          break;
      }
      
      // Animate dice roll
      dice.style.animation = 'diceRoll 1.5s ease-out';
      
      // After animation completes
      setTimeout(() => {
        dice.style.animation = '';
        dice.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        
        // Set level (1-10 based on dice roll)
        currentLevel = finalRoll;
        
        // Show game screen with selected level
        showGameScreen(currentLevel);
        
        // Re-enable dice clicking
        dice.style.pointerEvents = 'auto';
        
        // Restore original prompt
        levelPrompt.textContent = originalPrompt;
      }, 1500);
    }

    function showGameScreen(level) {
      // Update selected level text
      selectedLevel.textContent = `${translations[currentLanguage].selectedLevel} ${level}`;
      
      // Switch screens
      levelSelection.style.display = 'none';
      gameScreen.style.display = 'flex';
      
      // Load the level
      loadLevel(level);
    }

    function loadLevel(level) {
      // Clear existing circles
      grid.innerHTML = '';
      scratchCircles = [];
      revealedCount = 0;

      // Create new circles for the selected level
      imageSets[level].forEach((imgURL, index) => {
        createScratchCircle(imgURL, level);
      });
    }

    function createScratchCircle(imgURL, level) {
      const circle = document.createElement('div');
      circle.className = 'scratch-circle';

      const container = document.createElement('div');
      container.className = 'circle-container';

      const content = document.createElement('div');
      content.className = 'circle-content';
      const img = document.createElement('img');
      img.src = imgURL;
      img.alt = '';
      img.loading = "lazy";
      content.appendChild(img);

      const scratchLayer = document.createElement('div');
      scratchLayer.className = 'scratch-layer';

      const canvas = document.createElement('canvas');
      canvas.width = 300;
      canvas.height = 300;

      const border = document.createElement('div');
      border.className = 'circle-border';

      scratchLayer.appendChild(canvas);
      container.appendChild(content);
      container.appendChild(scratchLayer);
      container.appendChild(border);
      circle.appendChild(container);
      grid.appendChild(circle);

      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#495057';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      let isDrawing = false;
      let isRevealed = false;
      let revealedPixels = 0;
      const totalPixels = canvas.width * canvas.height;
      const revealThreshold = 0.4; // 40% scratched to reveal

      function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        
        if (e.touches) {
          return {
            x: (e.touches[0].clientX - rect.left) * scaleX,
            y: (e.touches[0].clientY - rect.top) * scaleY
          };
        } else {
          return {
            x: (e.clientX - rect.left) * scaleX,
            y: (e.clientY - rect.top) * scaleY
          };
        }
      }

      function scratch(e) {
        if (isRevealed) return;
        
        const pos = getPos(e);
        ctx.globalCompositeOperation = 'destination-out';
        ctx.beginPath();
        ctx.arc(pos.x, pos.y, 20, 0, Math.PI * 2);
        ctx.fill();
        
        // Check if enough is scratched to reveal
        if (!isRevealed) {
          revealedPixels += Math.PI * 20 * 20; // Approximate pixels scratched
          const revealedRatio = revealedPixels / totalPixels;
          
          if (revealedRatio > revealThreshold) {
            isRevealed = true;
            revealedCount++;
            scratchLayer.style.opacity = '0';
            scratchLayer.style.transform = 'translateZ(0)';
            circle.style.transform = 'scale(1.05)';
            setTimeout(() => {
              circle.style.transform = '';
            }, 300);
            
            // Add click event to zoom the image when revealed
            content.addEventListener('click', () => {
              zoomedImage.src = imgURL;
              zoomOverlay.classList.add('active');
            });

            // Check if all images are revealed
            if (revealedCount === imageSets[currentLevel].length) {
              showCelebration(currentLevel);
            }
          }
        }
      }

      // Mouse events
      canvas.addEventListener('mousedown', (e) => {
        isDrawing = true;
        scratch(e);
        e.preventDefault();
      });

      canvas.addEventListener('mousemove', (e) => {
        if (isDrawing) scratch(e);
        e.preventDefault();
      });

      canvas.addEventListener('mouseup', () => {
        isDrawing = false;
      });

      canvas.addEventListener('mouseleave', () => {
        isDrawing = false;
      });

      // Touch events
      canvas.addEventListener('touchstart', (e) => {
        isDrawing = true;
        scratch(e);
        e.preventDefault();
      });

      canvas.addEventListener('touchmove', (e) => {
        if (isDrawing) scratch(e);
        e.preventDefault();
      });

      canvas.addEventListener('touchend', () => {
        isDrawing = false;
      });

      // Store the circle in our array
      scratchCircles.push({
        element: circle,
        canvas: canvas,
        ctx: ctx,
        isRevealed: false
      });
    }

    function showCelebration(level) {
      // Set celebration content based on level
      celebrationTitle.textContent = translations[currentLanguage].celebrationTitle;
      celebrationMessage.textContent = translations[currentLanguage].celebrationMessages[level - 1];
      celebrationEmoji.textContent = translations[currentLanguage].celebrationEmojis[level - 1];
      
      // Show celebration overlay
      celebrationOverlay.classList.add('active');
      
      // Create confetti effect
      createConfetti();
    }

    function createConfetti() {
      const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
      
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.width = `${Math.random() * 10 + 5}px`;
        confetti.style.height = `${Math.random() * 10 + 5}px`;
        confetti.style.animation = `confetti-fall ${Math.random() * 3 + 2}s linear forwards`;
        confetti.style.animationDelay = `${Math.random() * 2}s`;
        celebrationOverlay.appendChild(confetti);
        
        // Remove confetti after animation
        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }
  </script>
</body>
</html>
